<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRO DASHBOARD | Ø£Ù†ÙˆØ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #6366f1; --bg: #111827; --card: #1f2937; --text: #f9fafb; --border: #374151; --danger: #ef4444; }
        
        body { font-family: 'Cairo', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; transition: 0.3s; overflow-x: hidden; }
        
        header { background: var(--card); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 2000; height: 65px; box-sizing: border-box; }
        
        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‡Ù…Ø¨Ø±Ø¬Ø± */
        .menu-toggle { font-size: 24px; cursor: pointer; color: var(--primary); }
        .sidebar { position: fixed; top: 0; right: -280px; width: 280px; height: 100%; background: var(--card); transition: 0.4s ease; z-index: 2500; padding-top: 70px; border-left: 1px solid var(--border); }
        .sidebar.open { right: 0; }
        .sidebar-item { padding: 15px 25px; cursor: pointer; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 12px; font-weight: bold; }
        .sidebar-item:hover { background: rgba(99, 102, 241, 0.1); }

        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: none; z-index: 2400; backdrop-filter: blur(4px); }
        .overlay.show { display: block; }

        .section { display: none; width: 95%; max-width: 500px; margin: 20px auto; }
        .section.active { display: block; }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚ Ù…Ù† ØµÙˆØ±Ùƒ */
        .counter-card { background: var(--card); padding: 20px; border-radius: 20px; margin-bottom: 15px; border: 1px solid var(--border); position: relative; }
        .delete-btn { position: absolute; top: 15px; right: 15px; cursor: pointer; opacity: 0.5; font-size: 1rem; }
        .counter-header h4 { margin: 0; font-size: 1.2rem; font-weight: 900; }
        .counter-body { display: flex; justify-content: flex-end; align-items: center; gap: 15px; margin: 15px 0; }
        
        .btn-ctrl { width: 45px; height: 45px; border-radius: 12px; border: none; cursor: pointer; font-size: 1.5rem; font-weight: bold; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .btn-plus { background: var(--primary); color: white; }
        .btn-minus { background: #f3f4f6; color: #111827; }
        .count-val { font-size: 1.8rem; font-weight: 900; min-width: 45px; text-align: center; }
        .goal-txt { font-size: 0.85rem; color: #9ca3af; }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© */
        .note-bubble { background: var(--card); padding: 15px; border-radius: 15px; border: 1px solid var(--border); margin-bottom: 15px; }
        .note-btns { display: flex; gap: 10px; justify-content: flex-end; border-top: 1px solid var(--border); padding-top: 10px; margin-top: 10px; }
        .action-btn { font-size: 0.8rem; padding: 6px 12px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg); color: var(--text); cursor: pointer; display: flex; align-items: center; gap: 5px; }

        input, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid var(--border); border-radius: 10px; background: var(--bg); color: var(--text); font-family: 'Cairo'; box-sizing: border-box; }
        .btn-full { background: var(--primary); color: white; border: none; padding: 14px; width: 100%; border-radius: 12px; cursor: pointer; font-weight: bold; font-size: 1rem; }
        
        .hidden { display: none !important; }
        .modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--card); padding: 25px; border-radius: 20px; z-index: 3000; width: 90%; max-width: 350px; display: none; border: 1px solid var(--border); }
    </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="closeAll()"></div>

<div class="modal" id="addModal">
    <h3 style="margin-top:0">â• Ø¥Ø¶Ø§ÙØ© Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯</h3>
    <input type="text" id="newTitle" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù…">
    <input type="number" id="newGoal" placeholder="Ø§Ù„Ù‡Ø¯Ù">
    <button class="btn-full" onclick="addNewCounter()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

<header>
    <div id="hamBtn" class="menu-toggle" onclick="toggleSidebar()" style="display:none">â˜°</div>
    <div style="font-weight: 900; color: var(--primary); font-size: 1.2rem;">PRO DASHBOARD</div>
    <div onclick="toggleTheme()" style="cursor:pointer; font-size:20px">ğŸŒ“</div>
</header>

<nav class="sidebar" id="sidebar">
    <div class="sidebar-item" onclick="showTab('counters')">ğŸ“Š Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
    <div class="sidebar-item" onclick="showTab('notes')">ğŸ“ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
    <div class="sidebar-item" style="color:var(--danger); border-top:1px solid var(--border); margin-top:20px" onclick="location.reload()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</div>
</nav>

<div id="authArea" class="section active">
    <div style="background:var(--card); padding:30px; border-radius:25px; border:1px solid var(--border); text-align:center">
        <h2 style="margin-top:0">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        <input type="text" id="userIn" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
        <input type="password" id="passIn" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button class="btn-full" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
        <p style="color:var(--primary); cursor:pointer; font-size:0.9rem; margin-top:15px">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</p>
    </div>
</div>

<div id="mainApp" class="hidden">
    <div id="countersSec" class="section active">
        <div id="countersList"></div>
        <button class="btn-full" style="background:transparent; border:2px dashed var(--primary); color:var(--primary)" onclick="openModal()">+ Ø¥Ø¶Ø§ÙØ© Ø¹Ø¯Ø§Ø¯ Ø¬Ø¯ÙŠØ¯</button>
    </div>

    <div id="notesSec" class="section">
        <div style="background:var(--card); padding:20px; border-radius:20px; border:1px solid var(--border)">
            <h3 style="margin-top:0">ğŸ“ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</h3>
            <textarea id="noteText" placeholder="Ø§ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø©..." rows="4"></textarea>
            <button class="btn-full" onclick="saveNote()">Ø­ÙØ¸</button>
        </div>
        <div id="nList" style="margin-top:20px"></div>
    </div>
</div>

<script>
    let user = null;
    let defaultCounters = [
        { title: 'Ø¯Ø¹Ù… ÙÙ†ÙŠ', goal: 115, val: 14 },
        { title: 'Ù…Ø±Ø§Ù‚Ø¨Ø©', goal: 25, val: 0 },
        { title: 'Ø±ÙŠØ¨ÙˆØ±ØªØ§Øª', goal: 20, val: 0 },
        { title: 'ØªÙƒØªØ§Øª', goal: 5, val: 0 },
        { title: 'ØªÙØ¹ÙŠÙ„', goal: 7, val: 0 }
    ];

    function login() {
        const u = document.getElementById('userIn').value;
        if(!u) return;
        let data = JSON.parse(localStorage.getItem('pro_'+u)) || { name:u, counters: defaultCounters, notes: [] };
        user = data;
        document.getElementById('authArea').classList.add('hidden');
        document.getElementById('mainApp').classList.remove('hidden');
        document.getElementById('hamBtn').style.display = 'block';
        renderAll();
    }

    function renderAll() {
        // Ø±Ù†Ø¯Ø± Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
        const cl = document.getElementById('countersList');
        cl.innerHTML = "";
        user.counters.forEach((c, i) => {
            cl.innerHTML += `
                <div class="counter-card">
                    <span class="delete-btn" onclick="delCounter(${i})">ğŸ—‘ï¸</span>
                    <div class="counter-header"><h4>${c.title}</h4></div>
                    <div class="counter-body">
                        <button class="btn-ctrl btn-plus" onclick="upd(${i},1)">+</button>
                        <span class="count-val">${c.val}</span>
                        <button class="btn-ctrl btn-minus" onclick="upd(${i},-1)">-</button>
                    </div>
                    <div class="goal-txt">Ø§Ù„Ù‡Ø¯Ù: ${c.goal}</div>
                </div>`;
        });

        // Ø±Ù†Ø¯Ø± Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª
        const nl = document.getElementById('nList');
        nl.innerHTML = "";
        user.notes.forEach((n, i) => {
            nl.innerHTML += `
                <div class="note-bubble">
                    <div>${n}</div>
                    <div class="note-btns">
                        <span class="action-btn" onclick="copyNote('${n}')">ğŸ“‹ Ù†Ø³Ø®</span>
                        <span class="action-btn" style="color:var(--danger)" onclick="delNote(${i})">ğŸ—‘ï¸ Ø­Ø°Ù</span>
                    </div>
                </div>`;
        });
        localStorage.setItem('pro_'+user.name, JSON.stringify(user));
    }

    function upd(i, amt) { user.counters[i].val = Math.max(0, user.counters[i].val + amt); renderAll(); }
    function delCounter(i) { if(confirm('Ø­Ø°Ù Ø§Ù„Ù‚Ø³Ù…ØŸ')) { user.counters.splice(i,1); renderAll(); } }
    function saveNote() { const t = document.getElementById('noteText').value; if(t) { user.notes.unshift(t); document.getElementById('noteText').value=""; renderAll(); } }
    function delNote(i) { user.notes.splice(i,1); renderAll(); }
    function copyNote(t) { navigator.clipboard.writeText(t); alert('ØªÙ… Ø§Ù„Ù†Ø³Ø®'); }

    function toggleSidebar() { document.getElementById('sidebar').classList.toggle('open'); document.getElementById('overlay').classList.toggle('show'); }
    function closeAll() { document.getElementById('sidebar').classList.remove('open'); document.getElementById('addModal').style.display='none'; document.getElementById('overlay').classList.remove('show'); }
    function showTab(t) { document.querySelectorAll('.section').forEach(s=>s.classList.remove('active')); document.getElementById(t+'Sec').classList.add('active'); closeAll(); }
    function openModal() { document.getElementById('addModal').style.display='block'; document.getElementById('overlay').classList.add('show'); }
    function addNewCounter() {
        const t = document.getElementById('newTitle').value;
        const g = document.getElementById('newGoal').value;
        if(t && g) { user.counters.push({title:t, goal:g, val:0}); renderAll(); closeAll(); }
    }
</script>
</body>
</html>